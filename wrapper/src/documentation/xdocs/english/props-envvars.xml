<?xml version="1.0"?>

<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "../dtd/docbook/4.1.2/docbookx.dtd">

<!-- ********************************************************************
     $Id$
     ******************************************************************** -->

<chapter id="props-envvars">
    <title>Environment Variable Expansion</title>
    <section>
        <title>Configuration Property Overview</title>
        <itemizedlist>
            <listitem>
                <ulink url="properties.html">Configuration Property Overview</ulink>
            </listitem>
        </itemizedlist>
    </section>
    <section>
        <title>Environment Variable Expansion</title>
        <para>
            The Wrapper supports environment variable expansion at run time
            within the values of any property.  To maintain the platform
            independent nature of the <literal moreinfo="none">wrapper.conf</literal>
            file, the windows syntax is used for all platforms.
        </para>
        <para>
            When the Wrapper is run as a service, environment variables will
            be loaded from the system registry rather than from the
            environment.  This was necessary because Windows loads the
            environment variables which are available to services when the
            machine is booted.  Any changes to the system environment variables
            in the registry (set directly or through the system control panel)
            are not made available to the services until the machine is once
            again rebooted.  By loading the environment variables from the
            registry, the reboot can be avoided while providing the same
            functionality.
        </para>
        <informalexample>
            <simpara><emphasis>Example referencing the <literal moreinfo="none">JAVA_HOME</literal> environment variable:</emphasis></simpara>
            <screen format="linespecific"><![CDATA[wrapper.java.command=%JAVA_HOME%/bin/java]]></screen>
        </informalexample>
        <para>
            This will expand at runtime to a fully qualified path on any
            system which defines the <literal moreinfo="none">JAVA_HOME</literal>
            environment variable.
        </para>
        <informalexample>
            <simpara><emphasis>Windows:</emphasis></simpara>
            <screen format="linespecific"><![CDATA[wrapper.java.command=C:\Sun\jdk1.3/bin/java]]></screen>
        </informalexample>
        <informalexample>
            <simpara><emphasis>Unix:</emphasis></simpara>
            <screen format="linespecific"><![CDATA[wrapper.java.command=/opt/IBMJava2-131/bin/java]]></screen>
        </informalexample>
        <para>
            If a referenced environment variable is not defined, then it will
            be left unchanged in the property value.
        </para>
    </section>
</chapter>
