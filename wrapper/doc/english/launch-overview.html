<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Launch Overview</title>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#023264" vlink="#023264" link="#525D76" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top"><a href="http://www.silveregg.co.jp/"><img src="images/silveregg-logo.png" border="0" vspace="0" hspace="0"></a></td><td bgcolor="#ffffff" align="right" valign="bottom" width="100%"><font color="gray" face="arial,helvetica,sanserif" size="+3"><i><b>Java Service Wrapper</b></i></font></td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td bgcolor="gray" colspan="7"><img height="1" width="1" src="images/spacer.png"></td>
</tr>
<tr>
<td valign="top" width="5"><img height="1" width="5" src="images/spacer.png"></td><td nowrap="1" valign="top" width="150">
<br>
<font face="arial,helvetica,sanserif">
<br>
<br>
<font size="+1" color="#000000">Documentation</font>
<br>
<font size="-1">
<ul>
<li>
<a href="introduction.html"><font size="-1">Introduction</font></a>
</li>
<li>
<a href="example.html"><font size="-1">Example</font></a>
</li>
<li>
<a href="api-overview.html"><font size="-1">API Overview</font></a>
</li>
<li>
<a href="config-overview.html"><font size="-1">Configuration Overview</font></a>
</li>
<li>
<a href="launch-overview.html"><font size="-1">Launching Your Application</font></a>
</li>
<li>
<a href="release-notes.html"><font size="-1">Release Notes</font></a>
</li>
<li>
<a href="debugging.html"><font size="-1">Debugging Your Application</font></a>
</li>
<li>
<a href="faq.html"><font size="-1">FAQ</font></a>
</li>
<li>
<a href="troubleshooting.html"><font size="-1">Troubleshooting</font></a>
</li>
<li>
<a href="../../jdoc/index.html"><font size="-1">JavaDocs API</font></a>
</li>
</ul>
</font>
<br>
<br>
<font size="+1" color="#000000">Users</font>
<br>
<font size="-1">
<ul>
<li>
<a href="users.html"><font size="-1">Users of Wrapper</font></a>
</li>
</ul>
</font>
<br>
<br>
<font size="+1" color="#000000">Download</font>
<br>
<font size="-1">
<ul>
<li>
<a href="http://sourceforge.net/project/showfiles.php?group_id=39428"><font size="-1">Binaries</font></a>
</li>
<li>
<a href="http://sourceforge.net/project/showfiles.php?group_id=39428"><font size="-1">Source Code</font></a>
</li>
</ul>
</font>
<br>
<br>
<font size="+1" color="#000000">Get Involved</font>
<br>
<font size="-1">
<ul>
<li>
<a href="http://sourceforge.net/projects/wrapper/"><font size="-1">Source Forge</font></a>
</li>
<li>
<a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/wrapper/"><font size="-1">CVS Repository</font></a>
</li>
<li>
<a href="http://sourceforge.net/forum/?group_id=39428"><font size="-1">Public Forums</font></a>
</li>
<li>
<a href="http://sourceforge.net/tracker/?group_id=39428"><font size="-1">Issue Tracking</font></a>
</li>
<li>
<a href="authors.html"><font size="-1">Authors</font></a>
</li>
<li>
<a href="license.html"><font size="-1">License</font></a>
</li>
</ul>
</font>
<br>
<br>
                        Hosted by:<br>
<A href="http://sourceforge.net/projects/wrapper/"><IMG alt="SourceForge Logo" border="0" height="31" width="88" src="http://sourceforge.net/sflogo.php?group_id=39428"></A>
<br>
</font></td><td valign="top" width="2"><img height="1" width="2" src="images/spacer.png"></td><td bgcolor="gray" valign="top" width="1"><img height="1" width="1" src="images/spacer.png"></td><td valign="top" width="10"><img height="1" width="10" src="images/spacer.png"></td><td align="left" valign="top" width="*">
<br>
<title>Launch Overview</title>
<center>
<table width="80%">
<tr>
<td bgcolor="#F3DD61">
<br>
<center>
<b><font face="arial,helvetica,sanserif" color="#000000">Launch Overview</font></b>
</center>
<br>
</td>
</tr>
</table>
</center>
<br>
 
     

    
<div>
<a name="NA2D"></a>
<table cellspacing="0" cellpadding="2" border="0" width="100%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+1"><b>Launching Your Application Under Wrapper</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
        
        
<ul>
            
<li>
                
<p align="justify">
                    
<a href="launch-overview.html#windows">Windows NT/2000</a>
                
</p>
            
</li>
            
<li>
                
<p align="justify">
                    
<a href="launch-overview.html#unix">Linux / Solaris</a>
                
</p>
            
</li>
        
</ul>
        
<div>
<a name="windows"></a>
<table cellspacing="0" cellpadding="2" border="0" width="99%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+0"><b>Windows NT/2000</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
            
            
<p align="justify">
                To run your application as a console app, execute the following command.
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>C:\MyApp\bin&gt; Wrapper.exe -c C:\MyApp\conf\wrapper.conf</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                To install the application as an NT service, execute.
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>C:\MyApp\bin&gt; Wrapper.exe -i C:\MyApp\conf\wrapper.conf</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                Then to start it, either reboot, go to the services control panel, or execute:
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>C:\MyApp\bin&gt; net start MyApp</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                To uninstall the application as an NT service, execute:
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>C:\MyApp\bin&gt; Wrapper.exe -r C:\MyApp\conf\wrapper.conf</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                These commands should normally be placed in batch files in the application's bin directory to make them easier to use.
            </p>
            
<p align="justify">
                A typical application would have the following three batch files in the bin directory with the Wrapper.exe file.  The scripts will look for a wrapper.conf file passed in as an argument and then use a default if one is not specified.  These examples assume that the '@app.home@' token will be replaced with your application's home directory on installation.  Something like 'C:\MyApp'.  The quotes around the paths in the scripts make it possible for the path to contain spaces.
                <p align="justify">
                    
<i>MyApp.bat</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>
@echo off&#13;
&#13;
set _WRAPPER_CONF="%~f1"&#13;
if not %_WRAPPER_CONF%=="" goto startup&#13;
set _WRAPPER_CONF="@app.home@\conf\wrapper.conf"&#13;
&#13;
:startup&#13;
"@app.home@\bin\Wrapper.exe" -c %_WRAPPER_CONF%&#13;
if not errorlevel 1 goto end&#13;
pause&#13;
&#13;
:end&#13;
set _WRAPPER_CONF=</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>InstallMyApp-NT.bat</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>
@echo off&#13;
&#13;
set _WRAPPER_CONF="%~f1"&#13;
if not %_WRAPPER_CONF%=="" goto startup&#13;
set _WRAPPER_CONF="@app.home@\conf\wrapper.conf"&#13;
&#13;
:startup&#13;
"@app.home@\bin\Wrapper.exe" -i %_WRAPPER_CONF%&#13;
if not errorlevel 1 goto end&#13;
pause&#13;
&#13;
:end&#13;
set _WRAPPER_CONF=</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>UninstallMyApp-NT.bat</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>
@echo off&#13;
&#13;
set _WRAPPER_CONF="%~f1"&#13;
if not %_WRAPPER_CONF%=="" goto startup&#13;
set _WRAPPER_CONF="@app.home@\conf\wrapper.conf"&#13;
&#13;
:startup&#13;
"@app.home@\bin\Wrapper.exe" -r %_WRAPPER_CONF%&#13;
if not errorlevel 1 goto end&#13;
pause&#13;
&#13;
:end&#13;
set _WRAPPER_CONF=</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                It is also possible to make batch scripts which use only relative paths.  This has the benefit of allowing you to unzip an application and run it in any location, but it has the drawback that the script will not work correctly on older version of windows.  Template batch files can be found in the src/bin directory, named App.bat.in, InstallApp-NT.bat.in and UninstallApp-NT.bat.in.  They should be renamed to match the name of your application.
                <p align="justify">
                    
<i>MyApp.bat</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>
@echo off&#13;
rem&#13;
rem Find the application home.&#13;
rem&#13;
if "%OS%"=="Windows_NT" goto nt&#13;
&#13;
echo This is not NT, so please edit this script and set _APP_HOME manually&#13;
set _APP_HOME=..&#13;
&#13;
goto conf&#13;
&#13;
:nt&#13;
rem %~dp0 is name of current script under NT&#13;
set _APP_HOME=%~dp0&#13;
rem : operator works similar to make : operator&#13;
set _APP_HOME=%_APP_HOME:\bin\=%&#13;
&#13;
&#13;
rem&#13;
rem Find the wrapper.conf&#13;
rem&#13;
:conf&#13;
set _WRAPPER_CONF="%~f1"&#13;
if not %_WRAPPER_CONF%=="" goto startup&#13;
set _WRAPPER_CONF="%_APP_HOME%\conf\wrapper.conf"&#13;
&#13;
&#13;
rem&#13;
rem Run the application.&#13;
rem At runtime, the current directory will be that of Wrapper.exe&#13;
rem&#13;
:startup&#13;
"%_APP_HOME%\bin\Wrapper.exe" -c %_WRAPPER_CONF%&#13;
if not errorlevel 1 goto end&#13;
pause&#13;
&#13;
:end&#13;
set _APP_HOME=&#13;
set _WRAPPER_CONF=&#13;
&#13;
</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                Starting in version 2.2.3, it is possible to specify paths in your wrapper.conf file which are relative to the Wrapper.exe file.  Older versions did not work correctly with relative paths when the application was run as an NT service.
            </p>
        
</font></td>
</tr>
</table>
</div>
<br>
        
<div>
<a name="unix"></a>
<table cellspacing="0" cellpadding="2" border="0" width="99%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+0"><b>Linux / Solaris</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
            
            
<p align="justify">
                To run your application from the command line:
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>$ wrapper [your application's wrapper config file]</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                In the src/bin subdirectory you will find some shell (bash and sh)script templates for starting and stopping wrapped applications cleanly in. These examples assume that the '@app.name@' and '@app.long.name@' tokens will be replaced with the name of your application on installation.  Good values are 'testwrapper' for '@app.name@' and 'Test Wrapper Application' for '@app.long.name@'.  These scripts also make some assumtions about your project's directory structure.  Template scripts can be found in the src/bin directory, named bash.script.in and sh.script.in respectively.
            </p>
            
<p align="justify">
                You may need to tweak some of the other values (like PIDDIR in the sh script) to get them to fit your environment.
            </p>
            
<p align="justify">
                These scripts are used by passing them a command.  Valid commands are <tt>start</tt>, <tt>stop</tt>, <tt>restart</tt>, and <tt>dump</tt>. <tt>start</tt> is used to launch the application and <tt>stop</tt> is used to stop it.  <tt>restart</tt> will start and then stop the application in a single command.  The <tt>dump</tt> command is used to invoke a thread dump in the JVM.  See the <a href="debugging.html">Debugging</a> section for more information on <tt>dump</tt>.
            </p>
            
<p align="justify">
                
<p align="justify">
                    
<i>bash script</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>
#! /bin/bash&#13;
&#13;
#&#13;
# Skeleton bash script suitable for starting and stopping &#13;
# wrapped Java apps on the Linux platform.&#13;
#&#13;
# This script expects to find the 'realpath' executable&#13;
# in the same directory. &#13;
#&#13;
&#13;
#-----------------------------------------------------------------------------&#13;
# These settings can be modified to fit the needs of your application&#13;
&#13;
# Application&#13;
APP_NAME="@app.name@"&#13;
APP_LONG_NAME="@app.long.name@"&#13;
&#13;
# Wrapper&#13;
WRAPPER_CMD="./wrapper"&#13;
WRAPPER_CONF="../conf/wrapper.conf"&#13;
&#13;
# Do not modify anything beyond this point&#13;
#-----------------------------------------------------------------------------&#13;
&#13;
# Get to the actual location of this script&#13;
SCRIPT_DIR=`dirname $0`&#13;
SCRIPT=`$SCRIPT_DIR/realpath $0`&#13;
cd `dirname $SCRIPT`&#13;
&#13;
# Find pidof.&#13;
PIDOF="/bin/pidof"&#13;
if [ ! -x $PIDOF ]&#13;
then&#13;
    PIDOF="/sbin/pidof"&#13;
    if [ ! -x $PIDOF ]&#13;
    then&#13;
        echo "Cannot find 'pidof' in /bin or /sbin."&#13;
        echo "This script requires 'pidof' to run."&#13;
        exit 1&#13;
    fi&#13;
fi&#13;
&#13;
start() {&#13;
    echo "Starting $APP_LONG_NAME..."&#13;
    pid=`$PIDOF $APP_NAME`&#13;
    if [ -z $pid ]&#13;
    then&#13;
        exec -a $APP_NAME $WRAPPER_CMD $WRAPPER_CONF &amp;&#13;
    else&#13;
        echo "$APP_LONG_NAME is already running."&#13;
        exit 1&#13;
    fi&#13;
}&#13;
&#13;
stop() {&#13;
    echo "Stopping $APP_LONG_NAME..."&#13;
    pid=`$PIDOF $APP_NAME`&#13;
    if [ -z $pid ]&#13;
    then&#13;
        echo "$APP_LONG_NAME was not running."&#13;
    else&#13;
        kill $pid&#13;
        sleep 6&#13;
&#13;
        pid=`$PIDOF $APP_NAME`&#13;
        if [ ! -z $pid ]&#13;
        then&#13;
            kill -9 $pid&#13;
        fi&#13;
&#13;
        pid=`$PIDOF $APP_NAME`&#13;
        if [ ! -z $pid ]&#13;
        then&#13;
            echo "Failed to stop $APP_LONG_NAME."&#13;
        else&#13;
            echo "Stopped $APP_LONG_NAME."&#13;
        fi&#13;
    fi&#13;
}&#13;
&#13;
dump() {&#13;
    echo "Dumping $APP_LONG_NAME..."&#13;
    pid=`$PIDOF $APP_NAME`&#13;
    if [ -z $pid ]&#13;
    then&#13;
        echo "$APP_LONG_NAME was not running."&#13;
    else&#13;
        kill -3 $pid&#13;
&#13;
        if [ $? -ne 0 ]&#13;
        then&#13;
            echo "Failed to dump $APP_LONG_NAME."&#13;
        else&#13;
            echo "Dumped $APP_LONG_NAME."&#13;
        fi&#13;
    fi&#13;
}&#13;
&#13;
case "$1" in&#13;
&#13;
    'start')&#13;
        start&#13;
        ;;&#13;
&#13;
    'stop')&#13;
        stop&#13;
        ;;&#13;
&#13;
    'restart')&#13;
        stop&#13;
        start&#13;
        ;;&#13;
&#13;
    'dump')&#13;
        dump&#13;
        ;;&#13;
&#13;
    *)&#13;
        echo "Usage: $0 { start | stop | restart | dump }"&#13;
        exit 1&#13;
        ;;&#13;
esac&#13;
&#13;
exit 0&#13;
</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>sh script</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>
#! /bin/sh&#13;
&#13;
#&#13;
# Skeleton sh script suitable for starting and stopping &#13;
# wrapped Java apps on the Solaris platform. &#13;
#&#13;
# This script expects to find the 'realpath' executable&#13;
# in the same directory. &#13;
#&#13;
# Make sure that PIDFILE points to the correct location,&#13;
# if you have changed the default location set in the &#13;
# wrapper configuration file.&#13;
#&#13;
&#13;
#-----------------------------------------------------------------------------&#13;
# These settings can be modified to fit the needs of your application&#13;
&#13;
# Application&#13;
APP_NAME="@app.name@"&#13;
APP_LONG_NAME="@app.long.name@"&#13;
&#13;
# Wrapper&#13;
WRAPPER_CMD="./wrapper"&#13;
WRAPPER_CONF="../conf/wrapper.conf"&#13;
&#13;
# Do not modify anything beyond this point&#13;
#-----------------------------------------------------------------------------&#13;
&#13;
# Get to the actual location of this script&#13;
SCRIPT_DIR=`dirname $0`&#13;
SCRIPT=`$SCRIPT_DIR/realpath $0`&#13;
cd `dirname $SCRIPT`&#13;
&#13;
# Process ID&#13;
PIDDIR="/var/run"&#13;
PIDFILE="$PIDDIR/$APP_NAME.pid"&#13;
pid=""&#13;
&#13;
getpid() {&#13;
    if [ -f $PIDFILE ]&#13;
    then&#13;
    if [ -r $PIDFILE ]&#13;
    then&#13;
        pid=`cat $PIDFILE`&#13;
        if [ "X$pid" != "X" ]&#13;
        then&#13;
        # Verify that a process with this pid is still running.&#13;
        pid=`/usr/bin/ps -p $pid | grep $pid | grep -v grep | awk '{print $1}' | tail -1`&#13;
        if [ "X$pid" = "X" ]&#13;
        then&#13;
            # This is a stale pid file.&#13;
            rm -f $PIDFILE&#13;
            echo "Removed stale pid file: $PIDFILE"&#13;
        fi&#13;
        fi&#13;
    else&#13;
        echo "Cannot read $PIDFILE."&#13;
        rm -f $PIDFILE&#13;
        exit 1&#13;
    fi&#13;
    fi&#13;
}&#13;
 &#13;
start() {&#13;
    echo "Starting $APP_LONG_NAME..."&#13;
    getpid&#13;
    if [ "X$pid" = "X" ]&#13;
    then&#13;
        exec $WRAPPER_CMD $WRAPPER_CONF &amp;&#13;
    else&#13;
        echo "$APP_LONG_NAME is already running."&#13;
        exit 1&#13;
    fi&#13;
}&#13;
 &#13;
stop() {&#13;
    echo "Stopping $APP_LONG_NAME..."&#13;
    getpid&#13;
    if [ "X$pid" = "X" ]&#13;
    then&#13;
        echo "$APP_LONG_NAME was not running."&#13;
&#13;
    else&#13;
        kill $pid&#13;
        sleep 6&#13;
&#13;
        pid=`/usr/bin/ps -p $pid | grep $pid | grep -v grep | awk '{print $1}' | tail -1`&#13;
&#13;
        if [ "X$pid" != "X" ]&#13;
        then&#13;
        # SIGTERM didn't work, send SIGKILL.&#13;
            kill -9 $pid&#13;
        rm -f $PIDFILE&#13;
&#13;
            pid=`/usr/bin/ps -p $pid | grep $pid | grep -v grep | awk '{print $1}' | tail -1`&#13;
        fi&#13;
&#13;
        if [ "X$pid" != "X" ]&#13;
        then&#13;
            echo "Failed to stop $APP_LONG_NAME."&#13;
            exit 1&#13;
        else&#13;
            echo "Stopped $APP_LONG_NAME."&#13;
        fi&#13;
    fi&#13;
}&#13;
&#13;
dump() {&#13;
    echo "Dumping $APP_LONG_NAME..."&#13;
    getpid&#13;
    if [ "X$pid" = "X" ]&#13;
    then&#13;
        echo "$APP_LONG_NAME was not running."&#13;
&#13;
    else&#13;
        kill -3 $pid&#13;
&#13;
        if [ $? -ne 0 ]&#13;
        then&#13;
            echo "Failed to dump $APP_LONG_NAME."&#13;
            exit 1&#13;
        else&#13;
            echo "Dumped $APP_LONG_NAME."&#13;
        fi&#13;
    fi&#13;
}&#13;
&#13;
case "$1" in&#13;
&#13;
    'start')&#13;
        start&#13;
        ;;&#13;
&#13;
    'stop')&#13;
        stop&#13;
        ;;&#13;
&#13;
    'restart')&#13;
        stop&#13;
        start&#13;
        ;;&#13;
&#13;
    'dump')&#13;
        dump&#13;
        ;;&#13;
&#13;
    *)&#13;
        echo "Usage: $0 { start | stop | restart | dump }"&#13;
        exit 1&#13;
        ;;&#13;
esac&#13;
&#13;
exit 0&#13;
</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
        
</font></td>
</tr>
</table>
</div>
<br>
    
</font></td>
</tr>
</table>
</div>
<br>

</td><td valign="top" width="5"><img height="1" width="5" src="images/spacer.png"></td>
</tr>
<tr>
<td bgcolor="gray" colspan="7"><img height="1" width="1" src="images/spacer.png"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr>
<td align="center"><font color="#525D76" size="-1" face="arial,helvetica,sanserif"><i>
                            Copyright &copy;2000-2001 by Silver Egg Technology Co., Ltd.
                            All Rights Reserved.
                        </i></font></td>
</tr>
</table>
</body>
</html>
