<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Examples</title>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#023264" vlink="#023264" link="#525D76" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top"><a href="http://www.silveregg.co.jp/"><img src="images/silveregg-logo.png" border="0" vspace="0" hspace="0"></a></td><td bgcolor="#ffffff" align="right" valign="bottom" width="100%"><font color="gray" face="arial,helvetica,sanserif" size="+3"><i><b>Java Service Wrapper</b></i></font></td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td bgcolor="gray" colspan="7"><img height="1" width="1" src="images/spacer.png"></td>
</tr>
<tr>
<td valign="top" width="5"><img height="1" width="5" src="images/spacer.png"></td><td nowrap="1" valign="top" width="150">
<br>
<font face="arial,helvetica,sanserif">
<br>
<br>
<font size="+1" color="#000000">Documentation</font>
<br>
<font size="-1">
<ul>
<li>
<a href="introduction.html"><font size="-1">Introduction</font></a>
</li>
<li>
<a href="example.html"><font size="-1">Example</font></a>
</li>
<li>
<a href="api-overview.html"><font size="-1">API Overview</font></a>
</li>
<li>
<a href="config-overview.html"><font size="-1">Configuration Overview</font></a>
</li>
<li>
<a href="launch-overview.html"><font size="-1">Launching Your Application</font></a>
</li>
<li>
<a href="release-notes.html"><font size="-1">Release Notes</font></a>
</li>
<li>
<a href="faq.html"><font size="-1">FAQ</font></a>
</li>
<li>
<a href="troubleshooting.html"><font size="-1">Troubleshooting</font></a>
</li>
<li>
<a href="../../jdoc/index.html"><font size="-1">JavaDocs API</font></a>
</li>
</ul>
</font>
<br>
<br>
<font size="+1" color="#000000">Users</font>
<br>
<font size="-1">
<ul>
<li>
<a href="users.html"><font size="-1">Users of Wrapper</font></a>
</li>
</ul>
</font>
<br>
<br>
<font size="+1" color="#000000">Download</font>
<br>
<font size="-1">
<ul>
<li>
<a href="http://sourceforge.net/project/showfiles.php?group_id=39428"><font size="-1">Binaries</font></a>
</li>
<li>
<a href="http://sourceforge.net/project/showfiles.php?group_id=39428"><font size="-1">Source Code</font></a>
</li>
</ul>
</font>
<br>
<br>
<font size="+1" color="#000000">Get Involved</font>
<br>
<font size="-1">
<ul>
<li>
<a href="http://sourceforge.net/projects/wrapper/"><font size="-1">Source Forge</font></a>
</li>
<li>
<a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/wrapper/"><font size="-1">CVS Repository</font></a>
</li>
<li>
<a href="http://sourceforge.net/forum/?group_id=39428"><font size="-1">Public Forums</font></a>
</li>
<li>
<a href="http://sourceforge.net/tracker/?group_id=39428"><font size="-1">Issue Tracking</font></a>
</li>
<li>
<a href="authors.html"><font size="-1">Authors</font></a>
</li>
<li>
<a href="license.html"><font size="-1">License</font></a>
</li>
</ul>
</font>
<br>
<br>
                        Hosted by:<br>
<A href="http://sourceforge.net/projects/wrapper/"><IMG alt="SourceForge Logo" border="0" height="31" width="88" src="http://sourceforge.net/sflogo.php?group_id=39428"></A>
<br>
</font></td><td valign="top" width="2"><img height="1" width="2" src="images/spacer.png"></td><td bgcolor="gray" valign="top" width="1"><img height="1" width="1" src="images/spacer.png"></td><td valign="top" width="10"><img height="1" width="10" src="images/spacer.png"></td><td align="left" valign="top" width="*">
<br>
<title>Examples</title>
<center>
<table width="80%">
<tr>
<td bgcolor="#F3DD61">
<br>
<center>
<b><font face="arial,helvetica,sanserif" color="#000000">Examples</font></b>
</center>
<br>
</td>
</tr>
</table>
</center>
<br>
 
     

    
<div>
<a name="NA2B"></a>
<table cellspacing="0" cellpadding="2" border="0" width="100%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+1"><b>Running the TestWrapper example application</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
        
        
<ul>
            
<li>
                
<p align="justify">
                    
<a href="example.html#testwrapper-console">Running in a Console</a>
                
</p>
            
</li>
            
<li>
                
<p align="justify">
                    
<a href="example.html#testwrapper-nt">Running as an NT Service</a>
                
</p>
            
</li>
            
<li>
                
<p align="justify">
                    
<a href="example.html#testwrapper-unix">Running as a Linux / Solaris Service</a>
                
</p>
            
</li>
        
</ul>
        
<div>
<a name="testwrapper-console"></a>
<table cellspacing="0" cellpadding="2" border="0" width="99%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+0"><b>Running in a Console</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
            
            
<p align="justify">
                Once you install the binary version of the Wrapper distribution, or have run build on a source distribution, you will be ready to immediately run the example application.
            </p>
            
<p align="justify">
                The TestWrapper example application is also used to test many of the recovery features of the Java Service Wrapper.
            </p>
            
<p align="justify">
                To run the example, cd into your bin directory and run the following script:
                <p align="justify">
                    
<i>Windows:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>TestWrapper.bat</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>Linux / Solaris:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>./testwrapper start</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<div align="center">
<table cellspacing="2" cellpadding="2" border="1">
<tr>
<td bgcolor="#c0c0c0"><font size="-1" color="#023264">
                    
<p align="justify">
                        The Solaris <tt>testwrapper</tt> script tries to write a PID file to <tt>/var/run</tt>. If you aren't logged in as root, this will fail. You can fix this by simply changing the <tt>PIDDIR</tt> variable in the script, or by logging in as root. If you log in as root, make sure that you have permission to use the X server or else you won't be able to see the <tt>testwrapper</tt> GUI.
                    </p>
                
</font></td>
</tr>
</table>
</div>
            
</p>
            
<p align="justify">
                The Windows console can be stopped cleanly by hitting CTRL-C, but the Linux and Solaris version require you to run the script with the stop parameter:
                <p align="justify">
                    
<i>Linux / Solaris:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>./testwrapper stop</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                The Linux and Solaris versions also provide the ability to restart the application:
                <p align="justify">
                    
<i>Linux / Solaris:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>./testwrapper restart</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                When the application starts, you should see the following dialog:
            </p>
            
<div align="center" class="screenshot">
                
                
<p>
<img src="images/TestWrapper.png"></p>
            
</div>
            
<p align="justify">
                You should also see the following in the console:
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                Let's start with the console output.  The first column of data displays the source of the output.  Lines starting with <tt>wrapper</tt> are coming from the native Wrapper application.  Lines starting with <tt>jvm 1</tt> are coming from the output of the JVM.  The number after <tt>jvm</tt> indicates the JVM number since the wrapper was started.  We will see how that works when we start playing with the TestWrapper's dialog.
            </p>
            
<p align="justify">
                The console output is also all logged to <tt>logs/wrapper.log</tt>.  The logged output differs from the console output in that each line of output also includes a timestamp.
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | 2001/12/06 16:18:27 | --&gt; Wrapper Started as Console
wrapper  | 2001/12/06 16:18:28 | Launching a JVM...
jvm 1    | 2001/12/06 16:18:29 | Initializing...
jvm 1    | 2001/12/06 16:18:30 | Wrapper (Version 2.x.x)
jvm 1    | 2001/12/06 16:18:30 | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | 2001/12/06 16:18:30 | All rights reserved.
jvm 1    | 2001/12/06 16:18:30 | 
jvm 1    | 2001/12/06 16:18:30 | start()</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                The TestWrapper presents you with a number of buttons.  These are each used to test various functionality of thw Wrapper.  Each button is described below with the output you will see in the console if the button is activated.
                <div class="glosslist">
<a name="NADD"></a>
<dl>
                    
                        
<dt>Exit</dt>
                        
<dd>
                            
<p align="justify">
                                Exits the JVM cleanly by calling WrapperManager.stop(0).
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
jvm 1    | stop(0)
wrapper  | &lt;-- Wrapper Stopped</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                As you can see, the application had its stop() method called and was stopped cleanly.
                            </p>
                        
</dd>
                    
<br>
                    
                        
<dt>Access Violation</dt>
                        
<dd>
                            
<p align="justify">
                                This takes advantage of a bug in the Sun JVM to cause an immediate access violation in the JVM.  (It doesn't work in the IBM JVM.  Or I guess you could say it does work...).
                                <p align="justify">
                                    
<i>Console Output (SUN JVM):</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
jvm 1    | WARNING: Attempting to cause an access violation...
jvm 1    | #
jvm 1    | # HotSpot Virtual Machine Error, EXCEPTION_ACCESS_VIOLATION
jvm 1    | # Please report this error at
jvm 1    | # http://java.sun.com/cgi-bin/bugreport.cgi
jvm 1    | #
jvm 1    | # Error ID: 4F533F57494E13120E43505002D4
jvm 1    | #
jvm 1    |
jvm 1    | abnormal program termination
wrapper  | JVM exited unexpectedly.
wrapper  | Launching a JVM...
jvm 2    | Initializing...
jvm 2    | Wrapper (Version 2.x.x)
jvm 2    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 2    | All rights reserved.
jvm 2    |
jvm 2    | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                As you can see, an access violation caused the JVM to display an error dump and then terminate.  The wrapper immediately detects this and after a 5 second pause, restarts the application in a new JVM, as can be seen with the <tt>jvm 2</tt>.  All available information about the crash has been logged for future reference.
                            </p>
                        
</dd>
                    
<br>
                    
                        
<dt>Native Access Violation</dt>
                        
<dd>
                            
<p align="justify">
                                The Wrapper includes a lightweight native library which is used to handle system events.  The library also contains a native method which is used for testing to cause an access violation in native code due to a NULL reference.  This may take a few moments for the application to restart as the system may save a coredump.  This can result in the Wrapper thinking that the application has become hung, as can be seen in this output.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
jvm 1    | WARNING: Attempting to cause an access violation...
jvm 1    | #
jvm 1    | # An EXCEPTION_ACCESS_VIOLATION exception has been detected in native code outside the VM.
jvm 1    | # Program counter=0x8f7105f
jvm 1    | #
wrapper  | JVM is hung: Timed out waiting for signal from JVM.
wrapper  | Java Virtual Machine did not exit on request, terminated
wrapper  | Launching a JVM...
jvm 2    | Initializing...
jvm 2    | Wrapper (Version 2.x.x)
jvm 2    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 2    | All rights reserved.
jvm 2    |
jvm 2    | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                As you can see, an access violation caused the JVM to display an error dump.  Dumping the core took a minute or so and the wrapper is configured to assume that the JVM is hung after it has lost contact for more than 30 seconds.  Either way, the wrapper detected the problem and restarted a fresh JVM.
                            </p>
                        
</dd>
                    
<br>
                    
                        
<dt>Simmulate JVM Hang</dt>
                        
<dd>
                            
<p align="justify">
                                This test causes the Wrapper to think that the JVM has become hung.  After 30 seconds, the Wrapper times out and decides that the JVM will not come back and restarts it.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
jvm 1    | WARNING: Attempting to cause an access violation...
wrapper  | JVM is hung: Timed out waiting for signal from JVM.
wrapper  | Java Virtual Machine did not exit on request, terminated
wrapper  | Launching a JVM...
jvm 2    | Initializing...
jvm 2    | Wrapper (Version 2.x.x)
jvm 2    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 2    | All rights reserved.
jvm 2    |
jvm 2    | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                        
</dd>
                    
<br>
                    
                        
<dt>System.exit(0)</dt>
                        
<dd>
                            
<p align="justify">
                                This button tests the Wrapper's ability to trap an unexpected call to System.exit() and stop the application gracefully.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
jvm 1    | stop(0)
jvm 1    | here
wrapper  | &lt;-- Wrapper Stopped</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                As an exercise, edit your <tt>conf/wrapper.conf</tt> file and uncomment the property, <tt>wrapper.disable_shutdown_hook=TRUE</tt>.  (Make sure to comment it back out when you are done)  Now rerun the test.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
wrapper  | JVM exited unexpectedly.
wrapper  | Launching a JVM...
jvm 2    | Initializing...
jvm 2    | Wrapper (Version 2.x.x)
jvm 2    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 2    | All rights reserved.
jvm 2    |
jvm 2    | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                You will notice that the Wrapper no longer catches the call to System.exit() and so the it thinks that the JVM crashed and restarts it.
                            </p>
                        
</dd>
                    
<br>
                    
                        
<dt>Runtime.getRuntime().halt(0)</dt>
                        
<dd>
                            
<p align="justify">
                                This button calls a very lowlevel method to stop the JVM very forcibly.  In this case, Shutdown Hooks are not executed and the Wrapper has no way to catch it.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
wrapper  | JVM exited unexpectedly.
wrapper  | Launching a JVM...
jvm 2    | Initializing...
jvm 2    | Wrapper (Version 2.x.x)
jvm 2    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 2    | All rights reserved.
jvm 2    |
jvm 2    | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                You will notice that the Wrapper thinks that the JVM crashed and restarts it.
                            </p>
                        
</dd>
                    
<br>
                
</dl>
</div>
            
</p>
            
<p align="justify">
                This covers all of the ways that your application can exit or die of its own will.  There are two other external factors that the Wrapper can also protect against.
                <div class="glosslist">
<a name="NB96"></a>
<dl>
                    
                        
<dt>CTRL-C</dt>
                        
<dd>
                            
<p align="justify">
                                Most Java applications die rather abruptly if the user hits CTRL-C, logs out of windows, etc.  You can work around some of these issues with a Shutdown Hook, but the Wrapper implements this by using a native library to directly capture the system signals.  This makes it possible to have a Java application installed as an NT Service without it being stopped when a user logs out.
                            </p>
                            
<p align="justify">
                                As a test, try hitting CTRL-C in the console window.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
wrapper  | CTRL-C trapped.  Shutting down.
jvm 1    | stop(0)
wrapper  | &lt;-- Wrapper Stopped</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                You can also see variations on this by logging out when the console application is still running.  The Wrapper will correctly terminate the application.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    | 
jvm 1    | start()
wrapper  | User logged out.  Shutting down.
jvm 1    | stop(0)
wrapper  | &lt;-- Wrapper Stopped</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                On Linux or Solaris platforms, you can not hit CTRL-C because the Wrapper is launched as a spawned process.  Running the script with the stop parameter will produce the following results:
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
wrapper  | Shutting down.
jvm 1    | stop(0)
wrapper  | &lt;-- Wrapper Stopped</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                        
</dd>
                    
<br>
                    
                        
<dt>Process Termination</dt>
                        
<dd>
                            
<p align="justify">
                                It is also possible, though unlikely, that the application process could be killed by another application.  This test also simmulates cases where the JVM dies very suddenly of its own accord.  On Unix systems, you can kill the java process with a <tt>kill -9</tt>.  On Windows systems, open up the Task Manager.  Select the Process tab.  Locate the java.exe process to kill and then kill it.
                                <p align="justify">
                                    
<i>Console Output:</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | --&gt; Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Initializing...
jvm 1    | Wrapper (Version 2.x.x)
jvm 1    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | All rights reserved.
jvm 1    |
jvm 1    | start()
wrapper  | JVM exited unexpectedly.
wrapper  | Launching a JVM...
jvm 2    | Initializing...
jvm 2    | Wrapper (Version 2.x.x)
jvm 2    | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 2    | All rights reserved.
jvm 2    |
jvm 2    | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                            
<p align="justify">
                                Restarts without any problems.
                            </p>
                        
</dd>
                    
<br>
                
</dl>
</div>
            
</p>
        
</font></td>
</tr>
</table>
</div>
<br>
        
<div>
<a name="testwrapper-nt"></a>
<table cellspacing="0" cellpadding="2" border="0" width="99%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+0"><b>Running as an NT Service</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
            
            
<p align="justify">
                When running as an NT service, the TestWrapper will be unable to show its Dialog.  So this application is not very interresting.  We can however do a few tests to verify that the Wrapper acts as an NT service correctly.
            </p>
            
<p align="justify">
                The first thing you will need to do is get the TestWrapper installed as a service by running the following command:
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>InstallTestWrapper-NT.bat</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>You will see the output:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | Test Wrapper Application installed.</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                Once the TestWrapper application in installed as a service, we will want to start it.
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>net start TestWrapper</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>You will see the output:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>The Test Wrapper Application service is starting.
The Test Wrapper Application service was started successfully.</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                The service can be uninstalled by executing the following command:
                <p align="justify">
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>UninstallTestWrapper-NT.bat</pre>
</td>
</tr>
</table>
</div>
                
</p>
                
<p align="justify">
                    
<i>If the service is running, you will see the output:</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | Service is running.  Stopping it...
wrapper  | Waiting to stop...
wrapper  | Test Wrapper Application stopped.
wrapper  | Test Wrapper Application removed.</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                If you look at the contents of <tt>logs/wrapper.log</tt>, you will see output very simmilar to that of the console.  Except this time, the start message informs you that the application is being started as a Service.
                <p align="justify">
                    
<i>wrapper.log</i>
                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | 2001/12/06 17:34:21 | --&gt; Wrapper Started as Service
wrapper  | 2001/12/06 17:34:21 | Launching a JVM...
jvm 1    | 2001/12/06 17:34:22 | Initializing...
jvm 1    | 2001/12/06 17:34:22 | Wrapper (Version 2.x.x)
jvm 1    | 2001/12/06 17:34:22 | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | 2001/12/06 17:34:22 | All rights reserved.
jvm 1    | 2001/12/06 17:34:22 |
jvm 1    | 2001/12/06 17:34:22 | start()</pre>
</td>
</tr>
</table>
</div>
                
</p>
            
</p>
            
<p align="justify">
                Here are the results of several more actions that can take place on an NT service:
                <div class="glosslist">
<a name="NC4B"></a>
<dl>
                    
                        
<dt>User Logging out and then back in</dt>
                        
<dd>
                            
<p align="justify">
                                A log entry is made when the user logs out, but the service is unaffected.
                                <p align="justify">
                                    
<i>wrapper.log</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | 2001/12/06 17:39:39 | --&gt; Wrapper Started as Service
wrapper  | 2001/12/06 17:39:40 | Launching a JVM...
jvm 1    | 2001/12/06 17:39:40 | Initializing...
jvm 1    | 2001/12/06 17:39:40 | Wrapper (Version 2.x.x)
jvm 1    | 2001/12/06 17:39:40 | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | 2001/12/06 17:39:40 | All rights reserved.
jvm 1    | 2001/12/06 17:39:40 |
jvm 1    | 2001/12/06 17:39:41 | start()
wrapper  | 2001/12/06 17:40:07 | User logged out.  Ignored.
jvm 1    | 2001/12/06 17:40:07 | controlEvent(202)</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                        
</dd>
                    
<br>
                    
                        
<dt>Restarting your machine.  This will result in a logout signal followed by a shut down signal.  The service will be shut down gracefully and then come back after the machine restarts.</dt>
                        
<dd>
                            
<p align="justify">
                                A log entry is made when the user logs out, but the service is unaffected.
                                <p align="justify">
                                    
<i>wrapper.log</i>
                                    
<div align="left">
<table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#eeeeee">
<tr>
<td>
<pre>wrapper  | 2001/12/06 17:41:04 | --&gt; Wrapper Started as Service
wrapper  | 2001/12/06 17:41:05 | Launching a JVM...
jvm 1    | 2001/12/06 17:41:05 | Initializing...
jvm 1    | 2001/12/06 17:41:05 | Wrapper (Version 2.x.x)
jvm 1    | 2001/12/06 17:41:05 | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | 2001/12/06 17:41:05 | All rights reserved.
jvm 1    | 2001/12/06 17:41:05 |
jvm 1    | 2001/12/06 17:41:05 | start()
wrapper  | 2001/12/06 17:41:25 | User logged out.  Ignored.
jvm 1    | 2001/12/06 17:41:26 | controlEvent(202)
wrapper  | 2001/12/06 17:41:27 | Machine is shutting down.
jvm 1    | 2001/12/06 17:41:27 | controlEvent(203)
jvm 1    | 2001/12/06 17:41:28 | stop(0)
wrapper  | 2001/12/06 17:41:29 | &lt;-- Wrapper Stopped
wrapper  | 2001/12/06 17:44:12 | --&gt; Wrapper Started as Service
wrapper  | 2001/12/06 17:44:12 | Launching a JVM...
jvm 1    | 2001/12/06 17:44:17 | Initializing...
jvm 1    | 2001/12/06 17:44:21 | Wrapper (Version 2.x.x)
jvm 1    | 2001/12/06 17:44:21 | Copyright 2000, 2001 Silver Egg Technology, Inc.
jvm 1    | 2001/12/06 17:44:21 | All rights reserved.
jvm 1    | 2001/12/06 17:44:21 |
jvm 1    | 2001/12/06 17:44:23 | start()</pre>
</td>
</tr>
</table>
</div>
                                
</p>
                            
</p>
                        
</dd>
                    
<br>
                
</dl>
</div>
            
</p>
        
</font></td>
</tr>
</table>
</div>
<br>
        
<div>
<a name="testwrapper-unix"></a>
<table cellspacing="0" cellpadding="2" border="0" width="99%">
<tr>
<td bgcolor="#525D76"><font face="arial,helvetica,sanserif" color="#ffffff" size="+0"><b>Running as a Linux / Solaris Service</b></font></td>
</tr>
<tr>
<td><font face="arial,helvetica,sanserif" color="#000000">
<br>
            
            
<p align="justify">
                There are not any differences between running as a service vs as a console application in a Unix environment.
            </p>
        
</font></td>
</tr>
</table>
</div>
<br>
    
</font></td>
</tr>
</table>
</div>
<br>

</td><td valign="top" width="5"><img height="1" width="5" src="images/spacer.png"></td>
</tr>
<tr>
<td bgcolor="gray" colspan="7"><img height="1" width="1" src="images/spacer.png"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr>
<td align="center"><font color="#525D76" size="-1" face="arial,helvetica,sanserif"><i>
                            Copyright &copy;2000-2001 by Silver Egg Technology Co., Ltd.
                            All Rights Reserved.
                        </i></font></td>
</tr>
</table>
</body>
</html>
